<!DOCTYPE html>
<html>
    <head>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.1/p5.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.1/addons/p5.dom.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.1/addons/p5.sound.min.js"></script>
        <link rel="stylesheet" type="text/css" href="style.css">
        <meta charset="utf-8" />
        <script src"https://cdn.jsdelivr.net/npm/p5@0.10.2/lib/p5.min.js"></script>
    </head>
    <body>
        <script type='text/javascript' src='.eel.js'></script>
        <script type='text/javascript'> 
            //p5.js setup

            let values = [];
            let loops = 0;
            let swaps = 0;
            let cycles = 1;
            let lines = false;
            let numLines = 200;
            let finished = false;
            let button;
            let selType, inpNum;


            function setup(){

                selType = createSelect();
                selType.position(10,10);
                selType.option('MergeSort');

                inpNum = createInput('200');
                inpNum.position(10, 30);
                inpNum.input(function() {
                    numLines = inpNum.value();
                    resetArray();
                });

                button = createButton('Restart');
                button.position(10,50);
                button.mousePressed(resetArray);
                

                createCanvas(windowWidth, windowHeight);
                colorMode(HSB, height);
                resetArray();
            }

            function draw(){
                background(0);

                if (!finished){
                    switch(selType.value()){
                        case 'MergeSort':
                            //eel.merge_sort(values)();
                            break; 
                    }
                } else {
                    console.log("finished");
                    noLoop();
                }

                for(i = 0; i < values.length; i++){
                    let col = color(values[i], height, height);
                    let location = map(i, 0, values.length, 0, width);
                    colorMode(RGB);
                    switch(i) {
                        default:
                            stroke(col);
                            fill(col);
                    }
                    colorMode(HSB, height);
                    rect(location, height-values[i], width/numLines, height);
                }
            }

            resetArray = function(){
                console.log('resetting')
                values = [];
                for(i = 0; i < numLines; i++){
                    values[i] = random(height);
                }
                loops= 0;
                swaps = 0;
                loop();
            }
        </script> 
        <!-- <script src="sketch.js"></script> -->
    </body>

</html>